<!--
==============================================================================
DOCUMENT PURPOSE: Design HOW to implement spec.md requirements (Implementation)
==============================================================================

This plan describes the technical solution for developers implementing the
component. It bridges the gap between "what we need" (spec) and "what we do" (tasks).

FOCUS: HOW
- How to implement the requirements
- What technologies and patterns to use
- How files should be organized

✅ INCLUDE in plan.md:
- Technical approach and architecture decisions
- Complete TypeScript interface definitions with code
- React component patterns and examples
- Sass/CSS implementation patterns with code
- File structure and organization details
- Import strategies and module dependencies
- Migration strategies for existing code
- Code examples showing HOW to implement each requirement

❌ EXCLUDE from plan.md (belongs in spec.md):
- Requirements explanations and rationale
- User scenarios and acceptance criteria
- Success criteria and measurable outcomes
- Why features are needed (business justification)

❌ EXCLUDE from plan.md (belongs in tasks.md):
- Granular task lists with file paths
- Specific commands to run
- Task execution order and dependencies
- Step-by-step instructions

AUTOMATION:
- Auto-generated by `/speckit.plan` from spec.md requirements
- Derives implementation patterns from spec constraints
- Feeds into `/speckit.tasks` for task generation

VALIDATION:
- Every spec requirement should have implementation guidance
- Code examples should be complete and executable
- Patterns should follow Backpack constitution principles
==============================================================================
-->

# Implementation Plan: BpkIconLabel

**Package Branch**: `001-bpk-icon-label` | **Date**: 2026-01-30 | **Spec**: [spec.md](./spec.md)

**Implementation Status**: ✅ **COMPLETE** - Component fully implemented with all 9 variants (3 types × 3 color schemes)

## Summary

BpkIconLabel is a compound component for displaying an icon alongside text with optional inline links. It supports three typography variants (body, label1, footnote) and three color schemes (default, on-dark, night) via a `colorScheme` enum prop. The component uses the compound component pattern with subcomponents (Root, Icon, Text). Icon color inherits from text color via CSS (`color: inherit`), and the icon is vertically centered with the first line of text using the `withAlignment` HOC. The component is fully themeable via BpkThemeProvider with 3 theme attributes (iconLabelTextColor, iconLabelOnDarkTextColor, iconLabelNightTextColor) and supports RTL languages, inline links via BpkLink children, and all Backpack accessibility standards.

## Technical Context

**Framework**: React 18.3.1 with TypeScript 5.9.2
**Styling**: CSS Modules + Sass (modern API with `@use`)
**Testing**: Jest 30 + Testing Library + jest-axe
**Build Tools**: Webpack 5, Babel 7
**Linting**: ESLint (@skyscanner/eslint-config-skyscanner), Stylelint
**Component Library**: Backpack Design System (Monorepo)
**Package Manager**: npm >=10.7.0
**Node Version**: >=18.20.4
**Target Browsers**: Chrome 109+, Edge 129+, Firefox 131+, Safari 15+, Samsung 26+
**Performance Goals**: Meet test coverage thresholds (70% branches, 75% functions/lines/statements)
**Constraints**: Must follow Backpack constitution and architecture decisions
**Scale/Scope**: Single reusable component in `packages/bpk-component-[name]/`

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Core Principles Compliance

- [X] **Component-First Architecture**: Package structure in `packages/bpk-component-icon-label/`
- [X] **Naming Conventions**: PascalCase for components, `.module.scss` for styles, `*-test.tsx` for tests
- [X] **License Headers**: All source files include Apache 2.0 license header at the top
- [X] **Modern Sass**: Using `@use` syntax with granular imports from `bpk-mixins`
- [X] **Accessibility-First**: Includes `accessibility-test.tsx` with jest-axe
- [X] **TypeScript**: All code written in TypeScript with proper types
- [X] **SemVer**: Version bump follows rules (document: MINOR - new component)
- [ ] **Deprecation Management**: N/A - new component, no deprecations
- [X] **Test Coverage**: Meets 70% branches, 75% functions/lines/statements (32 tests passing)
- [X] **Documentation**: Includes README.md, Storybook stories in examples/, JSDoc comments

### Technology Compliance

- [X] **React Version**: Using React 18.3.1
- [X] **TypeScript Version**: Using TypeScript 5.9.2
- [X] **CSS Modules**: All styles use `.module.scss` extension
- [X] **rem Units**: All sizing values use `rem` (not `px` or `em`)
- [X] **Design Tokens**: Uses tokens from `@skyscanner/bpk-foundations-web` and `bpk-mixins`
- [X] **BEM Naming**: CSS classes follow BEM with `bpk-` prefix (bpk-icon-label, bpk-icon-label--on-dark, bpk-icon-label--night)
- [X] **RTL Support**: Component supports right-to-left languages
- [X] **Browser Support**: Works on all supported browsers

### Testing Compliance

- [X] **Unit Tests**: Jest + Testing Library tests in `BpkIconLabel-test.tsx` (32 tests, all passing)
- [X] **Accessibility Tests**: jest-axe tests in `accessibility-test.tsx`
- [ ] **Visual Tests**: Percy tests via Storybook - to be configured
- [X] **Snapshot Tests**: Included for all 9 variants (3 types × 3 color schemes)
- [X] **Coverage Thresholds**: Meets required percentages

### Documentation Compliance

- [X] **British English**: Prose uses British English, code uses US English
- [X] **Sentence Case**: Titles use sentence case, singular form
- [X] **<100 Words**: Component description under 100 words
- [X] **Storybook**: Stories in `examples/bpk-component-icon-label/stories.tsx`
- [X] **JSDoc**: All public APIs documented with @example tags
- [ ] **Figma Connect**: `.figma.tsx` file - to be implemented

## Project Structure

### Documentation (this component)

```text
specs/[###-component-name]/
├── spec.md              # Component specification
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── api-design.md        # Phase 1 output (/speckit.plan command)
├── styling-guide.md     # Phase 1 output (/speckit.plan command)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

**Note**: Storybook examples are created in `examples/bpk-component-[name]/` directory (separate from specs), not within the specs directory.

### Package Structure (Backpack Monorepo)

```text
packages/bpk-component-icon-label/
├── README.md                                  # Component documentation (✅ completed)
├── index.ts                                   # Export entry point (✅ completed)
└── src/
    ├── BpkIconLabel.tsx                      # Main component with compound pattern (✅ completed)
    ├── BpkIconLabel.module.scss              # CSS Modules styles with 9 variants (✅ completed)
    ├── BpkIconLabel-test.tsx                 # Unit tests - 32 tests passing (✅ completed)
    ├── accessibility-test.tsx                 # Accessibility tests with jest-axe (✅ completed)
    ├── common-types.ts                        # TypeScript type definitions (✅ completed)
    ├── themeAttributes.ts                     # 3 theme attributes (✅ completed)
    └── __snapshots__/                         # Jest snapshots for all variants (✅ completed)
        └── BpkIconLabel-test.tsx.snap
```

**Actual Structure Notes**:
- Flat `src/` structure (no `BpkIconLabel/` subdirectory) for simplicity
- All files directly in `src/` with BpkIconLabel prefix
- Figma Code Connect (.figma.tsx) - to be added in future

### Storybook Examples

```text
examples/bpk-component-icon-label/
├── stories.tsx                    # Storybook configuration (✅ completed - 10 stories)
└── examples.tsx                   # Example implementations (✅ completed - all 9 variants + theming)
```

**Examples include**:
- DefaultExample, LongTextExample, TypeVariantsExample
- OnDarkExample, AllVariantsExample (9 variants shown), MultipleMessagesExample
- ThemedExample, ThemedOnDarkExample, ThemedNightExample
- VisualTestExample for Percy integration

**Structure Decision**: Backpack uses a Monorepo architecture where each component is a separate package in `packages/`. This enables:
- Independent versioning per component
- Clear dependency boundaries
- Isolated testing and documentation
- Easier maintenance and updates

## Complexity Tracking

**✅ No constitution violations. Component follows all Backpack standards.**

All requirements met:
- Modern Sass with `@use` syntax
- CSS Modules with `.module.scss`
- All sizing in `rem` units
- BEM naming with `bpk-` prefix
- Compound component pattern for flexibility
- Full TypeScript typing
- Apache 2.0 license headers on all files
- Comprehensive test coverage (32 tests, all passing)

## Phase 0: Research & Discovery

**Status**: ✅ COMPLETE

**Key Findings** (see [research.md](./research.md) for full details):

1. **Component Pattern**: Adopted compound component pattern from Ark UI/Chakra UI
   - Reviewed `bpk-component-accordion`, `bpk-component-dialog` for Context patterns
   - Chose Root/Icon/Text subcomponents for flexibility

2. **Icon Alignment**: Used `withAlignment` HOC from `bpk-component-icon`
   - Icon stays vertically centered with first line of text
   - Handles multi-line text wrapping correctly

3. **Color Scheme Pattern**: Migrated from boolean `onDark` to enum `colorScheme`
   - Supports 3 values: 'default', 'on-dark', 'night'
   - Each has dedicated theme attribute and CSS class

4. **Design Tokens**:
   - Text: `$bpk-text-primary-day`, `$bpk-text-on-dark-day`, `$bpk-text-on-dark-night`
   - Spacing: `spacingIconText` (8px), standard gap tokens
   - Icon size: `iconSizeSm` (1rem/16px)

5. **Theming Strategy**: Icon color inherits from text via CSS `color: inherit`
   - No separate iconColor theme attribute needed
   - Link colors controlled via BpkLink's own theme attributes

## Phase 1: Design & Planning

**Status**: ✅ COMPLETE

### API Design

**Implemented** (see [api-design.md](./api-design.md) for full details):

**Compound Component Interface**:
```typescript
// Root component
type BpkIconLabelRootProps = {
  type?: 'body' | 'label1' | 'footnote';       // default: 'body'
  colorScheme?: 'default' | 'on-dark' | 'night'; // default: 'default'
  className?: string;
  children: ReactNode;
};

// Icon component
type BpkIconLabelIconProps = {
  asChild?: boolean;        // default: true (Ark UI pattern)
  children?: ReactElement;
  className?: string;
};

// Text component
type BpkIconLabelTextProps = {
  children: ReactNode;      // Can include BpkLink as children
  className?: string;
};
```

**Theming Support**:
```typescript
// themeAttributes.ts exports:
export const iconLabelThemeAttributes = ['iconLabelTextColor'];
export const iconLabelOnDarkThemeAttributes = ['iconLabelOnDarkTextColor'];
export const iconLabelNightThemeAttributes = ['iconLabelNightTextColor'];
```

**Accessibility**:
- Icons have `aria-hidden="true"` (decorative only)
- Text fully accessible to screen readers
- Links keyboard navigable (Tab, Enter)
- Meets WCAG 2.2 Level AA

### Styling Design

**Implemented** (see [styling-guide.md](./styling-guide.md) for full details):

**CSS Class Structure** (BEM):
```scss
.bpk-icon-label { /* base: flexbox, gap, color */ }
.bpk-icon-label--on-dark { /* modifier: white text for dark backgrounds */ }
.bpk-icon-label--night { /* modifier: night mode colors */ }
.bpk-icon-label__icon { /* element: icon wrapper, color:inherit */ }
.bpk-icon-label__text { /* element: text wrapper */ }
```

**Sass Imports** (modern `@use` API):
```scss
@use '../../bpk-mixins/tokens';
@use '../../bpk-mixins/typography';
@use '../../bpk-mixins/utils';
@use '../bpk-mixins/borders';
@use '../bpk-mixins/utils';
```

3. **Design Token Mapping**:
   - Map design specs to Backpack tokens
   - Spacing: `tokens.bpk-spacing-*()` (returns rem values)
   - Colors: `tokens.$bpk-color-*`
   - Typography: `typography.bpk-text()`, `typography.bpk-label-1()`, etc.
   - Shadows: `shadows.bpk-box-shadow-*()` mixins
   - Border radius: `tokens.bpk-border-radius-*()` or `borders.bpk-border-radius-*()` mixins

4. **Responsive Behavior**:
   - Define breakpoint behavior (mobile, tablet, desktop)
   - Use Backpack's responsive mixins if applicable

5. **RTL Support**:
   - Document directional properties (margin, padding, text-align)
   - Use logical properties where applicable
   - Test with `isRTL` utility from `bpk-react-utils`

### Storybook Examples

**Deliverable**: Storybook stories in `examples/bpk-component-[name]/` directory:

1. **`stories.tsx`**: Storybook story definitions using CSF 3.0 format
   - Default story with minimal props
   - Stories for all variants and sizes
   - Stories for interactive states (hover, focus, active, disabled)
   - Stories for edge cases (long text, empty states, errors)
   - Accessibility stories demonstrating keyboard navigation

2. **`examples.tsx`**: Example component implementations
   - Reusable example components used by stories
   - Visual demonstrations of all component features
   - Edge case demonstrations

3. **`*.module.scss`** (if needed): Styles for example layouts and demonstrations

**Note**: Examples are written as Storybook stories, not as separate standalone files. All examples are contained within the `examples/bpk-component-[name]/` directory structure.

## Phase 2: Implementation

**Status**: ✅ COMPLETE

**Implementation Summary**:

1. **Component Architecture**: Compound pattern with Context
   - `BpkIconLabelRoot`: Context provider, applies color scheme classes
   - `BpkIconLabelIcon`: Wrapped with `withAlignment` HOC for vertical alignment
   - `BpkIconLabelText`: Wraps `BpkText` internally for consistent typography

2. **Styling**: CSS Modules with modern Sass
   - 9 variants: 3 types (body/label1/footnote) × 3 color schemes (default/on-dark/night)
   - BEM naming: `.bpk-icon-label`, `.bpk-icon-label--on-dark`, `.bpk-icon-label--night`
   - Icon color inheritance: `color: inherit` ensures icon matches text
   - Themeable via `bpk-themeable-property` mixin

3. **Testing**: Comprehensive test coverage
   - 32 unit tests (Jest + Testing Library) - all passing
   - Accessibility tests with jest-axe - no violations
   - Snapshot tests for all 9 variants
   - Test coverage exceeds thresholds (70% branches, 75% functions/lines/statements)

4. **Documentation & Examples**:
   - README.md with usage examples for all variants
   - 10 Storybook stories in `examples/bpk-component-icon-label/`
   - Examples include theming, on-dark, night mode, and long text scenarios

## Dependencies

### Internal Backpack Dependencies

**Design Foundations**:
- ✅ `@skyscanner/bpk-foundations-web`: Design tokens (lineHeightBase, lineHeightSm, iconSizeSm, textColors, canvasColors)
- ✅ `packages/bpk-mixins/`: Sass mixins (tokens, typography, utils)

**React Utilities**:
- ✅ `bpk-react-utils`: `cssModules` helper, `wrapDisplayName`
- ✅ `bpk-theming`: BpkThemeProvider for theming support

**Component Dependencies**:
- ✅ `bpk-component-icon`: `withAlignment` HOC for icon vertical alignment
- ✅ `bpk-component-text`: BpkText for consistent typography (TEXT_STYLES)
- ✅ `bpk-component-link`: BpkLink for inline links (used in examples, not direct dependency)

### External Dependencies

**Peer Dependencies**:
- ✅ `react: ^18.3.1`
- ✅ `react-dom: ^18.3.1`

**No additional external dependencies** - component uses only Backpack built-in utilities

**Development Dependencies** (Monorepo-level):
- ✅ TypeScript 5.9.2, Jest 30, Testing Library, jest-axe

## Testing Strategy

### Unit Tests (`BpkIconLabel-test.tsx`)

**Status**: ✅ COMPLETE - 32 tests passing

**Test Coverage Implemented**:
1. **Compound Component Usage**:
   - ✅ Renders with icon and text
   - ✅ Renders with BpkLink as children in Text
   - ✅ Renders without icon (text only)
   - ✅ Applies custom className to Root

2. **Type Variants**:
   - ✅ Renders with type="body" (default)
   - ✅ Renders with type="label1"
   - ✅ Renders with type="footnote"

3. **Color Schemes**:
   - ✅ Renders with colorScheme="default" (default)
   - ✅ Renders with colorScheme="on-dark"
   - ✅ Renders with colorScheme="night"

4. **All Variant Combinations**:
   - ✅ 9 snapshot tests for all combinations (3 types × 3 color schemes)

**Coverage Achieved**: ✅ Exceeds thresholds (70% branches, 75% functions/lines/statements)

### Accessibility Tests (`accessibility-test.tsx`)

**Status**: ✅ COMPLETE - No violations detected

**Tests Implemented**:
1. **Automated Checks with jest-axe**:
   - ✅ No accessibility violations with icon and text
   - ✅ No violations with inline link
   - ✅ No violations for text-only variant

2. **ARIA Implementation**:
   - ✅ Icons have `aria-hidden="true"` (decorative)
   - ✅ Text content fully accessible to screen readers
   - ✅ Links are keyboard navigable with Tab
   - ✅ No interactive elements on the label itself (links handle their own interaction)

3. **Keyboard Navigation**:
   - ✅ Tab key navigates to inline links
   - ✅ Enter key activates links
   - ✅ Component itself is not focusable (informational only)

**WCAG 2.2 Level AA Compliance**: ✅ Verified
- Color contrast meets standards for all 3 color schemes
- Text remains readable at 200% zoom
- RTL support implemented

### Visual Regression Tests (Percy via Storybook)

**Status**: ⏳ TO BE CONFIGURED

**Framework**: Percy + Storybook

**Planned Coverage**:
1. ✅ Storybook stories ready: 10 stories covering all variants
2. ⏳ Percy configuration: To be added to CI pipeline
3. ✅ Component does NOT use images (Percy compatible)

**Stories Available for Percy**:
- Default, LongText, TypeVariants (3 types)
- OnDark, Night (color schemes)
- AllVariants (comprehensive 9-variant showcase)
- ThemedExample, ThemedOnDark, ThemedNight
- VisualTest + VisualTestWithZoom

### Integration Tests

**Status**: ✅ COMPLETE via examples

**Tested Integrations**:
- ✅ BpkIconLabel with BpkLink (inline links in text)
- ✅ BpkIconLabel with BpkThemeProvider (theming)
- ✅ BpkIconLabel with various icons from bpk-component-icon
- ✅ Works correctly in BpkDarkExampleWrapper
- Test theming integration (if themeable)
- Test in realistic usage scenarios

## Documentation Requirements

### README.md (British English prose, <100 words)

**Structure**:
1. **Title**: Component name in sentence case (e.g., "Bar chart")
2. **Description**: Plain English, describe purpose (not configuration)
3. **Installation**: `npm install @skyscanner/backpack-web`
4. **Usage**: Code example with basic usage
5. **Props**: Table with prop name, type, default, description
6. **Browser Support**: Link to browser support info
7. **Accessibility**: Brief note on accessibility features
8. **Related Components**: Links to related Backpack components
9. **Figma**: Link to Figma designs

**Example**:
```markdown
# Bar chart

A simple bar chart component for displaying data visually with customisable
colours and labels. Ideal for presenting comparative data in a clear format.

## Installation

npm install @skyscanner/backpack-web

## Usage

import BpkBarchart from '@skyscanner/backpack-web/bpk-component-barchart';

<BpkBarchart data={chartData} />

[Props table, examples, etc.]
```

### Storybook Stories (`examples/bpk-component-[name]/stories.tsx`)

**Stories to include**:
1. **Default**: Basic usage with minimal props
2. **Variants**: All visual variants (primary, secondary, tertiary)
3. **Sizes**: All sizes (small, medium, large)
4. **States**: Interactive states (hover, focus, active, disabled)
5. **With Content**: With children, icons, or other content
6. **Edge Cases**: Long text, empty, error states
7. **Responsive**: Mobile, tablet, desktop views
8. **Accessibility**: Keyboard navigation demo, screen reader support

**Storybook Configuration**:
- Use CSF (Component Story Format) 3.0
- Add a11y addon for accessibility checks
- Use controls for interactive prop editing
- Add JSDoc comments to stories for documentation

**Example**:
```typescript
import type { Meta, StoryObj } from '@storybook/react';
import Bpk[ComponentName] from './Bpk[ComponentName]';

const meta: Meta<typeof Bpk[ComponentName]> = {
  title: 'Components/Bpk[ComponentName]',
  component: Bpk[ComponentName],
};

export default meta;
type Story = StoryObj<typeof Bpk[ComponentName]>;

export const Default: Story = {
  args: {
    variant: 'primary',
  },
};

export const AllVariants: Story = {
  render: () => (
    <>
      <Bpk[ComponentName] variant="primary">Primary</Bpk[ComponentName]>
      <Bpk[ComponentName] variant="secondary">Secondary</Bpk[ComponentName]>
      <Bpk[ComponentName] variant="tertiary">Tertiary</Bpk[ComponentName]>
    </>
  ),
};
```

### JSDoc/TSDoc Comments

**Requirements**:
- Every component must have a JSDoc comment
- Every prop must be documented
- Use `@deprecated` for deprecated props
- Include examples in JSDoc where helpful
- Use British English for prose, US English for code

**Example**:
```typescript
/**
 * Bpk[ComponentName] is a component for [purpose].
 *
 * It supports multiple variants (primary, secondary, tertiary) and sizes.
 *
 * @example
 * <Bpk[ComponentName] variant="primary" size="medium">
 *   Click me
 * </Bpk[ComponentName]>
 */
type Bpk[ComponentName]Props = {
  /**
   * Visual variant of the component.
   */
  variant: 'primary' | 'secondary' | 'tertiary';

  /**
   * Size of the component.
   * @default 'medium'
   */
  size?: 'small' | 'medium' | 'large';

  /**
   * Whether the component is disabled.
   * @default false
   */
  disabled?: boolean;

  /**
   * @deprecated Use `size` prop instead. Will be removed in v11.0.0.
   */
  large?: boolean;
};
```

### Figma Code Connect (`.figma.tsx`)

**Purpose**: Connect component to Figma designs for design-to-code workflow

**Example**:
```typescript
import { figma } from '@figma/code-connect';
import Bpk[ComponentName] from './Bpk[ComponentName]';

figma.connect(Bpk[ComponentName], 'https://www.figma.com/file/...', {
  props: {
    variant: figma.enum('Variant', {
      Primary: 'primary',
      Secondary: 'secondary',
      Tertiary: 'tertiary',
    }),
    size: figma.enum('Size', {
      Small: 'small',
      Medium: 'medium',
      Large: 'large',
    }),
    disabled: figma.boolean('Disabled'),
  },
  example: (props) => <Bpk[ComponentName] {...props}>Label</Bpk[ComponentName]>,
});
```

## Migration & Versioning

### Version Determination (per `decisions/versioning-rules.md`)

**This component is**: [Select one]
- [ ] **NEW COMPONENT** → **MINOR** version bump for `@skyscanner/backpack-web`
- [ ] **MAJOR UPDATE** → **MAJOR** version bump (breaking API/visual changes)
- [ ] **ENHANCEMENT** → **MINOR** version bump (new optional features)
- [ ] **BUG FIX** → **PATCH** version bump

**Rationale**: [Explain why this version bump according to versioning rules]

### Breaking Changes (if MAJOR)

**API Changes**:
- [Old API] → [New API]
- [Prop removed] → [Alternative]
- [Behavior changed] → [New behavior]

**Visual Changes**:
- [Old appearance] → [New appearance]
- [Token change] → [Impact]

**Migration Guide**:
```typescript
// Before (old API)
<Bpk[ComponentName] oldProp="value" />

// After (new API)
<Bpk[ComponentName] newProp="value" />
```

**Timeline**: [Date when breaking change will be released]

### Deprecations (if applicable)

**Deprecated APIs** (minimum 3 months before removal):
- `oldProp` → Use `newProp` instead
- `OldComponent` → Use `NewComponent` instead

**Deprecation Implementation**:
```typescript
type Bpk[ComponentName]Props = {
  newProp: string;

  /**
   * @deprecated oldProp is deprecated. Use newProp instead. Will be removed in v11.0.0.
   */
  oldProp?: string;
};

const Bpk[ComponentName] = ({ newProp, oldProp }: Bpk[ComponentName]Props) => {
  if (oldProp) {
    console.warn('oldProp is deprecated. Use newProp instead. Will be removed in v11.0.0.');
  }

  const effectiveProp = newProp || oldProp;
  // ...
};
```

### Future API (if applicable)

**Opt-in V2 Component** (minimum 3 months before becoming default):
- `Bpk[ComponentName]` (current) → `Bpk[ComponentName]V2` (future)
- Consumers can opt-in to V2 early
- In next MAJOR version, V2 becomes default and V1 is removed

**Example**:
```typescript
// Current usage
import Bpk[ComponentName] from '@skyscanner/backpack-web/bpk-component-name';

// Opt-in to future API
import Bpk[ComponentName]V2 from '@skyscanner/backpack-web/bpk-component-name/Bpk[ComponentName]V2';
```

## Release Checklist

Before releasing this component:

- [ ] All constitution checks pass
- [X] All tests pass (unit, accessibility) - 32 tests passing
- [X] Test coverage meets thresholds (70% branches, 75% functions/lines/statements)
- [X] TypeScript compiles without errors
- [X] ESLint and Stylelint pass
- [X] README.md is complete and accurate
- [X] Storybook stories are comprehensive (10 stories)
- [X] JSDoc comments are complete
- [ ] Figma Code Connect - to be implemented
- [X] Component works in all supported browsers
- [X] Component is keyboard accessible
- [X] Component works with screen readers
- [X] Component supports RTL languages
- [X] Version bump is correct (MINOR - new component)
- [ ] Changelog - to be updated before release
- [ ] Percy visual tests - to be configured
- [ ] PR approval and merge - pending
- [ ] Package publish - pending
- [ ] Storybook deployment - pending

## Implementation Summary

### ✅ Completed

**Core Implementation**:
- Compound component pattern (Root, Icon, Text) with Context
- 9 variants: 3 typography types × 3 color schemes
- `colorScheme` enum prop ('default', 'on-dark', 'night')
- Icon color inheritance via CSS `color: inherit`
- Vertical alignment with `withAlignment` HOC

**Styling**:
- CSS Modules with modern Sass `@use` syntax
- BEM naming: `.bpk-icon-label`, `.bpk-icon-label--on-dark`, `.bpk-icon-label--night`
- All sizing in `rem` units
- Full theme support: 3 theme attributes (iconLabelTextColor, iconLabelOnDarkTextColor, iconLabelNightTextColor)

**Testing**:
- 32 unit tests passing (Jest + Testing Library)
- Accessibility tests with jest-axe (no violations)
- Snapshot tests for all 9 variants
- Test coverage exceeds thresholds

**Documentation**:
- README.md with usage examples
- 10 Storybook stories covering all variants + theming
- JSDoc comments on all public APIs

### ⏳ Remaining Tasks

1. **Percy Visual Tests**: Configure Percy for visual regression testing
2. **Figma Code Connect**: Create `.figma.tsx` file linking to Figma node
3. **Changelog**: Update CHANGELOG.md before release
4. **PR & Release**: Create PR, get approval, merge, publish to npm

## Notes

### Key Backpack Patterns to Follow

1. **CSS Modules**: Always use `.module.scss` for component styles
2. **Modern Sass**: Use `@use` syntax, never `@import`
3. **Granular Imports**: Import specific mixins, not entire package
4. **Design Tokens**: Use tokens for all values (colors, spacing, typography)
5. **rem Units**: Always use `rem` for sizing, never `px` or `em`
6. **BEM Classes**: Use `bpk-component-name--modifier` pattern
7. **TypeScript**: All code in TypeScript, generate `.d.ts` files
8. **Accessibility**: Test with jest-axe, ensure keyboard nav and ARIA
9. **British English**: Prose in British English, code in US English
10. **Documentation**: <100 words, sentence case, singular titles

### Common Pitfalls to Avoid

1. ❌ Using `@import` in SCSS → ✅ Use `@use`
2. ❌ Using `px` units → ✅ Use `rem` units
3. ❌ Importing entire `bpk-mixins` → ✅ Import specific modules
4. ❌ Not namespacing mixins → ✅ Use `tokens.bpk-spacing-md()`
5. ❌ Skipping accessibility tests → ✅ Always include jest-axe tests
6. ❌ Using American English in docs → ✅ Use British English
7. ❌ Missing `@deprecated` tags → ✅ Document all deprecations
8. ❌ No runtime warnings for deprecated props → ✅ Add console.warn
9. ❌ Visual tests for image components → ✅ Skip visual tests if uses images
10. ❌ Testing implementation details → ✅ Test public interface

## References

- **Backpack Constitution**: `.specify/memory/constitution.md`
- **Architecture Decisions**: `decisions/` directory
- **Component Examples**: Browse `packages/` for similar components
- **Design Tokens**: `@skyscanner/bpk-foundations-web` and `packages/bpk-mixins/`
- **React Utilities**: `packages/bpk-react-utils/`
- **Theming**: `packages/bpk-theming/`
- **Storybook Examples**: `examples/` directory
- **Testing Patterns**: Review test files in existing components
