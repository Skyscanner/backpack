# Backpack Nx Migration Documentation

**Status**: Ready for Implementation  
**Branch**: `001-nx-migration`  
**Last Updated**: 2026-01-26

## ğŸ“‹ æ–‡æ¡£æ¦‚è§ˆ

æœ¬ç›®å½•åŒ…å«Backpackè¿ç§»åˆ°Nxçš„å®Œæ•´è§„åˆ’æ–‡æ¡£ï¼ŒåŒ…æ‹¬éœ€æ±‚è§„èŒƒã€å®æ–½è®¡åˆ’å’Œ5ä¸ªè¯¦ç»†çš„milestoneè®¡åˆ’ã€‚

## ğŸ—‚ï¸ æ–‡æ¡£ç»“æ„

```
specs/001-nx-migration/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶ - å¯¼èˆªæŒ‡å—
â”œâ”€â”€ spec.md                      # éœ€æ±‚è§„èŒƒï¼ˆä¸­è‹±æ–‡ï¼‰
â”œâ”€â”€ plan.md                      # æ€»ä½“å®æ–½è®¡åˆ’
â”œâ”€â”€ checklists/
â”‚   â””â”€â”€ requirements.md          # éœ€æ±‚è´¨é‡æ£€æŸ¥æ¸…å•
â””â”€â”€ milestones/
    â”œâ”€â”€ milestone-1-nx-foundation.md        # M1: NxåŸºç¡€æ­å»ºï¼ˆ2-3å‘¨ï¼‰
    â”œâ”€â”€ milestone-2-testing-linting.md      # M2: æµ‹è¯•å’ŒLinté›†æˆï¼ˆ2å‘¨ï¼‰
    â”œâ”€â”€ milestone-3-dev-workflow.md         # M3: å¼€å‘æµç¨‹å’ŒStorybookï¼ˆ1-2å‘¨ï¼‰
    â”œâ”€â”€ milestone-4-cicd-caching.md         # M4: CI/CDå’Œç¼“å­˜ï¼ˆ2å‘¨ï¼‰
    â””â”€â”€ milestone-5-optimization.md         # M5: ä¼˜åŒ–å’Œæ–‡æ¡£ï¼ˆ1å‘¨ï¼‰
```

## ğŸ“– å¿«é€Ÿå¼€å§‹

### 1. é˜…è¯»é¡ºåº

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡äº†è§£è¿™ä¸ªè¿ç§»é¡¹ç›®ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»ï¼š

1. **[spec.md](./spec.md)** - äº†è§£è¿ç§»èƒŒæ™¯ã€ç›®æ ‡å’Œéœ€æ±‚
2. **[plan.md](./plan.md)** - äº†è§£æŠ€æœ¯æ–¹æ¡ˆå’Œæ€»ä½“milestoneåˆ’åˆ†
3. **[milestone-1-nx-foundation.md](./milestones/milestone-1-nx-foundation.md)** - è¯¦ç»†çš„ç¬¬ä¸€é˜¶æ®µå®æ–½è®¡åˆ’
4. åç»­milestoneæ–‡æ¡£ï¼ˆæŒ‰é¡ºåºï¼‰

### 2. å…³é”®ä¿¡æ¯é€ŸæŸ¥

**è¿ç§»ç›®æ ‡**:
- å°†Backpackçš„96ä¸ªpackageä»custom npm scriptsè¿ç§»åˆ°Nx
- ä¿æŒæ‰€æœ‰ç°æœ‰åŠŸèƒ½ï¼Œé›¶breaking changes
- å®ç°æ„å»ºç¼“å­˜ï¼Œæå‡å¼€å‘å’ŒCIæ•ˆç‡
- ä¸ºfutureå’Œbanana monorepoé›†æˆåšå‡†å¤‡

**æ—¶é—´ä¼°è®¡**: 8-10å‘¨æ€»è®¡
- Milestone 1: 2-3å‘¨ ï¼ˆPoC/MVPï¼‰
- Milestone 2: 2å‘¨
- Milestone 3: 1-2å‘¨
- Milestone 4: 2å‘¨
- Milestone 5: 1å‘¨

**æˆåŠŸæ ‡å‡†**:
- âœ… æ‰€æœ‰96ä¸ªpackagesæˆåŠŸæ„å»º
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œè¦†ç›–ç‡ä¿æŒ
- âœ… æ„å»ºæ—¶é—´ä¸è¶…è¿‡baselineçš„110%
- âœ… ç¼“å­˜å‘½ä¸­ç‡>80%
- âœ… CIæ‰§è¡Œæ—¶é—´å‡å°‘>20%

## ğŸ¯ Milestoneæ¦‚è§ˆ

### Milestone 1: Nx Foundation (PoC/MVP)
**ç›®æ ‡**: åˆå§‹åŒ–Nxå¹¶å»ºç«‹åŸºæœ¬æ„å»ºç¼–æ’  
**æ—¶é•¿**: 2-3å‘¨  
**äº¤ä»˜ç‰©**: Nxé…ç½®ã€æ‰€æœ‰packageçš„project.jsonã€åŸºæœ¬ç¼“å­˜  
**è¯¦æƒ…**: [milestone-1-nx-foundation.md](./milestones/milestone-1-nx-foundation.md)

### Milestone 2: Testing & Linting Integration
**ç›®æ ‡**: é›†æˆJestã€ESLintã€Stylelintå’ŒPercy  
**æ—¶é•¿**: 2å‘¨  
**äº¤ä»˜ç‰©**: æµ‹è¯•/lintç¼“å­˜ã€affected commands  
**è¯¦æƒ…**: [milestone-2-testing-linting.md](./milestones/milestone-2-testing-linting.md)

### Milestone 3: Development Workflow & Storybook
**ç›®æ ‡**: é›†æˆStorybookå¹¶ä¼˜åŒ–å¼€å‘ä½“éªŒ  
**æ—¶é•¿**: 1-2å‘¨  
**äº¤ä»˜ç‰©**: Storybook via Nxã€HMRä¿ç•™ã€å¼€å‘è€…æ–‡æ¡£  
**è¯¦æƒ…**: [milestone-3-dev-workflow.md](./milestones/milestone-3-dev-workflow.md)

### Milestone 4: CI/CD & Distributed Caching
**ç›®æ ‡**: æ›´æ–°CI/CD pipelineï¼Œå¯é€‰å¯ç”¨Nx Cloud  
**æ—¶é•¿**: 2å‘¨  
**äº¤ä»˜ç‰©**: GitHub Actionsæ›´æ–°ã€åˆ†å¸ƒå¼ç¼“å­˜ã€CIä¼˜åŒ–  
**è¯¦æƒ…**: [milestone-4-cicd-caching.md](./milestones/milestone-4-cicd-caching.md)

### Milestone 5: Optimization & Documentation
**ç›®æ ‡**: å®Œå–„æ–‡æ¡£ã€å›¢é˜ŸåŸ¹è®­ã€æ€§èƒ½ä¼˜åŒ–  
**æ—¶é•¿**: 1å‘¨  
**äº¤ä»˜ç‰©**: å®Œæ•´æ–‡æ¡£ã€Nx generatorsï¼ˆå¯é€‰ï¼‰ã€åŸ¹è®­ææ–™  
**è¯¦æƒ…**: [milestone-5-optimization.md](./milestones/milestone-5-optimization.md)

## ğŸ”‘ å…³é”®å†³ç­–

æ–‡æ¡£ä¸­å·²è§£å†³çš„3ä¸ªå…³é”®æ¶æ„å†³ç­–ï¼ˆåŸºäºå¢é‡è¿ç§»åŸåˆ™ï¼‰ï¼š

### AD-001: Nxç¼“å­˜ç­–ç•¥
**å†³ç­–**: æ··åˆæ–¹å¼ï¼ˆå…ˆæœ¬åœ°ç¼“å­˜ï¼ŒåNx Cloudï¼‰  
**ç†ç”±**: é™ä½åˆå§‹å¤æ‚åº¦ï¼Œæ¸è¿›å¼æ·»åŠ åˆ†å¸ƒå¼ç¼“å­˜

### AD-002: åŒ…ç»“æ„ç»„ç»‡
**å†³ç­–**: ä¿æŒå½“å‰packages/ç›®å½•ç»“æ„  
**ç†ç”±**: æœ€å°åŒ–è¿ç§»å¤æ‚åº¦ï¼Œä¿ç•™æ‰€æœ‰importè·¯å¾„

### AD-003: Storybooké›†æˆæ–¹å¼
**å†³ç­–**: è‡ªå®šä¹‰é›†æˆï¼ˆå°è£…ç°æœ‰é…ç½®ä¸ºNx targetsï¼‰  
**ç†ç”±**: Storybook 10å·²é…ç½®å·¥ä½œï¼Œé™ä½è¿ç§»é£é™©

## ğŸ“Š æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | åŸºå‡† | ç›®æ ‡ | è¯´æ˜ |
|------|------|------|------|
| å…¨é‡æ„å»ºæ—¶é—´ | [å¾…æµ‹é‡] | <110% baseline | ä¸èƒ½æ˜æ˜¾å˜æ…¢ |
| ç¼“å­˜æ„å»ºæ—¶é—´ | N/A | <5ç§’ | ç¼“å­˜å‘½ä¸­æ—¶ |
| ç¼“å­˜å‘½ä¸­ç‡ | 0% | >80% | é‡å¤æ„å»ºæ—¶ |
| CIæ‰§è¡Œæ—¶é—´ | [å¾…æµ‹é‡] | <80% baseline | æœŸæœ›20%+æå‡ |
| æµ‹è¯•æ‰§è¡Œæ—¶é—´ | [å¾…æµ‹é‡] | <110% baseline | ä¿æŒæˆ–ç•¥å¾®æå‡ |

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯ä»¥åšçš„ï¼š

1. **å®¡é˜…æ–‡æ¡£** - é˜…è¯»specå’Œplanï¼Œç†è§£è¿ç§»èŒƒå›´
2. **è·å–æ¾„æ¸…** - å¦‚æœ‰ç–‘é—®ï¼Œåœ¨specçš„"Open Questions"éƒ¨åˆ†è¡¥å……
3. **å‡†å¤‡ç¯å¢ƒ** - ç¡®ä¿æœ¬åœ°æœ‰Node.js >=18.20.4å’Œnpm >=10.7.0
4. **å»ºç«‹åŸºå‡†** - æµ‹é‡å½“å‰æ„å»º/æµ‹è¯•æ—¶é—´ä½œä¸ºbaseline

### å‡†å¤‡å¼€å§‹Milestone 1:

1. **åˆ›å»ºspikeåˆ†æ”¯** - ç”¨äºå®éªŒå’ŒéªŒè¯
2. **å®‰è£…Nx** - `npm install -D nx@latest`
3. **æµ‹è¯•å•ä¸ªpackage** - é€‰ä¸€ä¸ªç®€å•çš„åŒ…å…ˆé›†æˆ
4. **éªŒè¯æ„å»ºè¾“å‡º** - ç¡®ä¿ä¸ç°æœ‰è¾“å‡ºä¸€è‡´

## ğŸ“ è·å–å¸®åŠ©

- **Slack**: #backpack channel
- **æ–‡æ¡£é—®é¢˜**: åœ¨spec.mdçš„"Open Questions"éƒ¨åˆ†æ·»åŠ 
- **æŠ€æœ¯é—®é¢˜**: å‚è€ƒå„milestoneçš„"Troubleshooting"éƒ¨åˆ†
- **å‚è€ƒé¡¹ç›®**: bananaå’Œfalconçš„Nxè¿ç§»ï¼ˆå¦‚å¯è®¿é—®ï¼‰

## ğŸ”„ æ–‡æ¡£ç»´æŠ¤

æœ¬æ–‡æ¡£ä¼šéšç€è¿ç§»è¿›å±•æŒç»­æ›´æ–°ï¼š

- **spec.md**: å¦‚éœ€æ±‚å˜æ›´æˆ–æ¾„æ¸…é—®é¢˜
- **plan.md**: å¦‚æ¶æ„å†³ç­–è°ƒæ•´
- **milestoneæ–‡æ¡£**: å®æ–½è¿‡ç¨‹ä¸­çš„issueså’Œresolutions
- **README.md**: å½“æ–‡æ¡£ç»“æ„å˜åŒ–æ—¶

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå…¨é¢çš„è¿ç§»è®¡åˆ’ï¼Œæ¯ä¸ªmilestoneéƒ½æœ‰è¯¦ç»†çš„å®æ–½æ­¥éª¤ã€éªŒè¯æ ‡å‡†å’Œå›æ»šæ–¹æ¡ˆã€‚å»ºè®®å¾ªåºæ¸è¿›æ‰§è¡Œï¼Œæ¯ä¸ªmilestoneå®Œæˆåè¿›è¡Œå……åˆ†éªŒè¯å†ç»§ç»­ä¸‹ä¸€ä¸ªã€‚

**ç¥è¿ç§»é¡ºåˆ©ï¼** ğŸ‰
