/*
 * Backpack - Skyscanner's Design System
 *
 * Copyright 2016 Skyscanner Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@use '../../bpk-mixins/tokens';
@use '../../bpk-mixins/typography';
@use '../../bpk-mixins/utils';

.bpk-checkbox {
  display: inline-flex;
  align-items: flex-start;
  color: tokens.$bpk-text-primary-day;
  cursor: pointer;
  gap: tokens.bpk-spacing-sm();

  @include typography.bpk-body-default;

  // --- On Dark (white) variant ---
  &--white {
    color: tokens.$bpk-surface-default-day;
  }

  // --- Disabled variant ---
  &--disabled {
    color: tokens.$bpk-label-disabled-color;
    cursor: not-allowed;
  }

  // --- Disabled + On Dark ---
  &--disabled#{&}--white {
    color: tokens.$bpk-text-disabled-on-dark-day;
  }

  // === CONTROL WRAPPER (2px vertical offset from Figma) ===
  &__control-wrapper {
    display: flex;
    padding-top: tokens.$bpk-one-pixel-rem * 2;
    padding-bottom: tokens.$bpk-one-pixel-rem * 2;
    align-items: center;
    flex-shrink: 0;
  }

  // === CONTROL (the 20x20 checkbox box) ===
  &__control {
    $size: tokens.bpk-spacing-lg() - (tokens.$bpk-one-pixel-rem * 4);

    display: flex;
    width: $size;
    height: $size;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    border: (tokens.$bpk-one-pixel-rem * 3) solid tokens.$bpk-text-secondary-day;
    border-radius: tokens.$bpk-one-pixel-rem * 4;
    box-sizing: border-box;

    // -- Checked & Indeterminate --
    &[data-state='checked'],
    &[data-state='indeterminate'] {
      border-color: tokens.$bpk-core-accent-day;
      background-color: tokens.$bpk-core-accent-day;
    }

    // -- Disabled --
    &[data-disabled] {
      border-color: tokens.$bpk-text-disabled-day;
      cursor: not-allowed;
    }

    // -- Disabled + Checked/Indeterminate --
    &[data-disabled][data-state='checked'],
    &[data-disabled][data-state='indeterminate'] {
      border-color: tokens.$bpk-text-disabled-day;
      background: none;
    }

    // -- Invalid/Error --
    &[data-invalid] {
      border-color: tokens.$bpk-text-error-day;
    }

    // -- Focus-visible (keyboard-only) --
    &[data-focus-visible] {
      @include utils.bpk-focus-indicator;
    }
  }

  // === ON DARK CONTROL OVERRIDES ===
  &--white &__control {
    // On Dark unchecked: white background fill
    &[data-state='unchecked'] {
      background-color: tokens.$bpk-surface-default-day;
    }

    // On Dark disabled: different border token
    &[data-disabled] {
      border-color: tokens.$bpk-text-disabled-on-dark-day;
      background: none;
    }
  }

  // === INDICATOR (checkmark / minus icons) ===
  // Ark UI uses the hidden attribute to toggle visibility.
  // display: flex overrides hidden, so only apply it when not hidden.
  &__indicator {
    color: tokens.$bpk-surface-default-day;

    &:not([hidden]) {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    &[data-disabled] {
      color: tokens.$bpk-text-disabled-day;
    }
  }

  // === CONTENT (slot area for label + description + any content) ===
  &__content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    flex: 1 0 0;
    gap: tokens.bpk-spacing-sm();
  }

  // === LABEL ===
  &__label {
    @include typography.bpk-body-default;
  }
}
